# 🧪 功能测试清单

## 基础环境测试

- [ ] 后端服务启动成功 (`http://localhost:5000`)
- [ ] 前端服务启动成功 (`http://localhost:5173`)  
- [ ] API健康检查正常 (`http://localhost:5000/api/health`)

## 🏠 首页测试

访问 `http://localhost:5173/`

- [ ] 页面正常加载，UI美观
- [ ] "开始健康评估" 按钮可点击
- [ ] 导航菜单功能正常

## 📋 问卷诊断测试

### 基础功能
- [ ] 19题问卷正确显示
- [ ] 题目类型正确（单选/多选）
- [ ] 答题进度条正常更新
- [ ] 必答题验证生效

### 特殊逻辑测试

#### 测试第1题特殊逻辑
1. 第1题选择**"好"**
   - [ ] 立即跳转到恭喜页面
   - [ ] 显示睡眠质量96/96分
   - [ ] 显示"睡眠质量优秀"信息
   - [ ] 不需要回答后续题目

#### 测试正常诊断流程
1. 第1题选择**"较差"**或**"一般"**
   - [ ] 继续回答后续18题
   - [ ] 所有题目答完后进入结果页面

#### 测试第9题特殊逻辑
1. 完成前8题后，第9题选择包含**"半年以上"**的选项
   - [ ] 最终结果强制显示为"差"
   - [ ] 显示"建议就医"提示
   - [ ] `needs_medical_attention: true`

### 评分系统测试
- [ ] 1-8题评分正确（10,12,12,9,12,9,12,20分）
- [ ] 第7题多选扣分逻辑（每选一项扣3分）
- [ ] 第8题多选扣分逻辑（每选一项扣4分）
- [ ] 10-14题是非题评分（是+1，否0）
- [ ] 15-19题多选评分（每选一项+1）
- [ ] 总分96分制计算正确

## 🔬 诊断结果测试

访问诊断结果页面

### 睡眠质量显示
- [ ] 总分显示正确（x/96）
- [ ] 百分比计算准确
- [ ] 等级判定正确（优86+，良70+，中55+，差55-）
- [ ] 等级颜色区分明显

### 证型诊断测试
- [ ] 二元诊断矩阵计算正确
- [ ] 最终证型在6种类型中：
  - 肝郁肾虚、肝郁脑虚、气血两虚
  - 气滞血瘀、精髓空虚、神经衰弱
- [ ] 主要证型（行维度）显示
- [ ] 次要证型（列维度）显示
- [ ] 置信度合理（0.6-0.95）

### 产品推荐测试
- [ ] 根据证型推荐对应产品
- [ ] 产品信息完整（名称、价格、描述）
- [ ] 组合优惠计算正确
- [ ] 热销标签正确显示

## 🛒 购买流程测试

### 购物车功能
1. 点击"加入购物车"
   - [ ] 成功提示显示
   - [ ] 商品添加到购物车
   - [ ] 数量可以调整
   - [ ] 可以删除商品

2. 访问购物车页面 (`/cart`)
   - [ ] 商品列表正确显示
   - [ ] 价格计算准确
   - [ ] 组合优惠折扣正确
   - [ ] 运费逻辑（满99免运费）

### 一键购买组合测试
1. 点击"一键购买组合套餐"
   - [ ] 所有推荐产品加入购物车
   - [ ] 享受组合优惠价格
   - [ ] 跳转到购物车页面

### 结算流程测试
1. 购物车点击"结算"跳转到 `/checkout`
   - [ ] 收货地址选择正常
   - [ ] 可以添加新地址
   - [ ] 支付方式选择
   - [ ] 订单摘要计算正确

2. 点击"立即支付"
   - [ ] 订单提交成功
   - [ ] 跳转到成功页面
   - [ ] 购物车清空

### 订单成功页面
访问 `/order-success`
- [ ] 订单信息显示完整
- [ ] 后续操作引导清晰
- [ ] 服务承诺和使用建议显示

## 💾 数据保存测试

### 前端数据持久化
- [ ] 诊断结果保存到localStorage
- [ ] 购物车数据持久化
- [ ] 页面刷新后数据不丢失

### 后端数据保存
1. 完成诊断后检查数据库
   - [ ] 诊断记录成功保存
   - [ ] 答案数据完整
   - [ ] 诊断结果正确存储
   - [ ] 时间戳记录准确

2. API数据保存测试
   ```bash
   # 查看数据库记录
   cd backend
   python -c "
   from app import create_app, db
   from app.models.database_models import DiagnosisRecord
   app = create_app()
   with app.app_context():
       records = DiagnosisRecord.query.all()
       print(f'共有{len(records)}条诊断记录')
       if records:
           latest = records[-1]
           print(f'最新记录ID: {latest.id}')
           print(f'诊断结果: {latest.final_diagnosis}')
   "
   ```

## 🔗 API接口测试

### 诊断API测试
- [ ] `GET /api/diagnosis/info` - 问卷信息
- [ ] `POST /api/diagnosis/analyze` - 分析接口  
- [ ] `POST /api/diagnosis/validate` - 验证接口
- [ ] `GET /api/diagnosis/grades` - 分级标准
- [ ] `GET /api/diagnosis/health` - 健康检查

### 错误处理测试
- [ ] 无效数据提交返回400错误
- [ ] 服务器错误返回500错误
- [ ] 错误信息清晰明确

## 📱 响应式设计测试

### 移动端测试
1. 手机浏览器访问或开发者工具移动端模拟
   - [ ] 页面布局适配良好
   - [ ] 按钮大小适合触摸
   - [ ] 表单输入体验流畅
   - [ ] 购物车和结算页面可用

### 不同屏幕尺寸
- [ ] 桌面端 (1920x1080)
- [ ] 平板端 (768x1024)  
- [ ] 手机端 (375x667)

## 🎨 UI/UX测试

### 视觉体验
- [ ] 颜色搭配和谐
- [ ] 字体大小合适
- [ ] 图标显示正确
- [ ] 动画效果流畅

### 交互体验  
- [ ] 按钮悬停效果
- [ ] 加载状态提示
- [ ] 成功/错误消息显示
- [ ] 页面切换流畅

## 🚀 性能测试

### 加载性能
- [ ] 首页加载时间 < 3秒
- [ ] 问卷页面响应及时
- [ ] 诊断结果计算快速
- [ ] 页面切换无明显延迟

### 网络请求
- [ ] API请求响应时间合理
- [ ] 网络错误处理得当
- [ ] 超时机制正常工作

---

## ✅ 测试完成标准

当上述所有项目都通过测试后，说明系统部署成功且功能完整！

**核心验证路径：**
1. 问卷诊断 → 证型分析 → 产品推荐 → 购买下单 ✅
2. 数据保存到数据库 ✅  
3. 特殊逻辑正确工作 ✅
4. 移动端体验良好 ✅

🎉 **恭喜完成部署！这是一个功能完整的健康电商平台！**