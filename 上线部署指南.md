# 🚀 失眠智能诊疗系统 - 上线部署指南

## 📋 系统功能概览
✅ 中医失眠问诊系统  
✅ 智能诊断与证型分析  
✅ 个性化产品推荐  
✅ 组合购买（8.8折优惠）  
✅ 扫码支付功能  
✅ 管理后台  
✅ 数据库持久化  

---

## 🔥 推荐上线方案：Render

### **方案优势**
- 🆓 **免费额度**：每月750小时免费
- ⚡ **自动部署**：连接GitHub自动部署
- 🛡️ **HTTPS**：自动SSL证书
- 🌍 **全球CDN**：访问速度快
- 📊 **监控**：内置监控和日志

### **成本预算**
- **免费阶段**：¥0/月（750小时额度）
- **付费升级**：¥50-150/月（按需扩容）

---

## 📝 部署步骤

### **第1步：准备代码仓库**
```bash
# 1. 创建GitHub仓库
git init
git add .
git commit -m "准备上线：失眠智能诊疗系统"
git remote add origin https://github.com/你的用户名/insomnia-ai-doctor
git push -u origin main
```

### **第2步：Render部署**
1. 访问 [render.com](https://render.com)
2. 注册账号并连接GitHub
3. 选择 "New" → "Blueprint" 
4. 选择你的GitHub仓库
5. Render会自动读取 `render.yaml` 配置
6. 点击 "Apply" 开始部署

### **第3步：配置环境变量（如需要）**
在Render Dashboard中设置：
- `FLASK_ENV=production`
- `FLASK_DEBUG=false`
- 其他配置项...

### **第4步：获取访问地址**
部署完成后，你会得到：
- **后端API**：`https://insomnia-ai-doctor-backend.onrender.com`
- **前端网站**：`https://insomnia-ai-doctor-frontend.onrender.com`

---

## 🔧 上线前检查清单

### **功能测试**
- [ ] 问诊流程正常
- [ ] 诊断结果准确
- [ ] 产品推荐显示
- [ ] 购物车功能
- [ ] 支付二维码显示
- [ ] 管理后台访问

### **性能优化**
- [ ] 页面加载速度 < 3秒
- [ ] 图片压缩优化
- [ ] API响应时间 < 1秒
- [ ] 移动端适配

### **安全检查**
- [ ] HTTPS强制跳转
- [ ] API接口安全
- [ ] 数据库备份
- [ ] 错误页面处理

---

## 🚀 快速上线命令

```bash
# 一键部署脚本
echo "开始部署失眠智能诊疗系统..."

# 检查依赖
npm install
cd backend && pip install -r requirements.txt

# 构建前端
cd ..
npm run build

# 提交代码
git add .
git commit -m "🚀 正式上线版本"
git push

echo "✅ 代码已推送到GitHub"
echo "🔔 请在Render.com完成最后部署步骤"
echo "🌐 预计5-10分钟后可访问"
```

---

## 📞 上线后维护

### **监控指标**
- **访问量**：Google Analytics
- **错误率**：Render监控台
- **响应时间**：内置监控
- **用户反馈**：客服微信

### **数据备份**
```bash
# 每日自动备份数据库
cp backend/instance/insomnia_diagnosis.db backup/$(date +%Y%m%d).db
```

### **版本更新**
```bash
# 更新部署
git add .
git commit -m "更新功能：XXXX"
git push  # 自动触发重新部署
```

---

## 🎯 上线里程碑

### **第一阶段：MVP上线**
- [x] 核心功能完整
- [x] 基础用户体验
- [x] 支付功能
- [ ] 域名绑定
- [ ] 正式发布

### **第二阶段：功能增强**
- [ ] 用户登录系统
- [ ] 微信小程序版本
- [ ] 数据分析报告
- [ ] 客服聊天功能

### **第三阶段：商业运营**
- [ ] 营销推广
- [ ] 用户增长
- [ ] 收入转化
- [ ] 扩容优化

---

## ⚡ 遇到问题？

### **常见问题解决**
1. **部署失败**：检查 `render.yaml` 配置
2. **访问缓慢**：考虑升级付费计划
3. **数据丢失**：恢复数据库备份
4. **功能异常**：查看Render日志

### **技术支持**
- 📧 **邮件**：技术支持邮箱
- 💬 **微信**：insomnia-tech
- 📱 **电话**：紧急联系方式

---

**🎉 恭喜！你的失眠智能诊疗系统即将上线！**